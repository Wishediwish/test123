
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Сон или Реальность?</title>
  <style>
    body {
      margin: 0;
      font-family: 'Georgia', serif;
      color: #fff;
      background-color: #000;
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
      transition: background-image 1s ease-in-out;
    }
    .screen {
      padding: 2em;
      max-width: 700px;
      margin: auto;
    }
    .container {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 12px;
      padding: 2em;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
    }
    h1 {
      text-align: center;
      color: #ffd1dc;
    }
    button {
      margin: 1em 0;
      background: #444;
      border: none;
      padding: 1em;
      color: white;
      border-radius: 8px;
      width: 100%;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #666;
    }
  </style>
</head>
<body>
  <div class="screen">
    <div class="container">
      <h1 id="scene-title"></h1>
      <div id="scene-text"></div>
      <div id="actions"></div>
    </div>
  </div>

  <script>
    const scenes = [
      {
        title: "Водопад Очищения",
        background: "backgrounds/waterfall.jpg",
        messages: [
          "Итами просыпайся! Итамиии... ты впорядке?",
          "Хух, я волновался что уже не получилось, Добро пожаловать, Нам с тобой предстоит пройти небольшое приключение, и отыскать кое что оставленое тебе в этом месте.",
          "Сейчас мы находимся у водопада очищения, это место служит защитной стеной, здесь нет обходных путей или горных проходов, путь только один через водопад, сквозь него проходит всё, и не проходит так же. Хех, если что-то посчитается не нужным или недопустимым — оно будет раздавлено непрерывным потоком. Сложно поверить, но раньше его тут не было, и это была просто тропа. Ой! нужно поторопиться, у нас не так много времени."
        ],
        actions: [
          { text: "Ты слышишь чей-то голос, кто-то зовёт тебя — Проснуться.", nextMessage: 1 },
          { text: "Осмотреться вокруг.", nextMessage: 2 },
          { text: "... Проследовать за духом сквозь водопад.", nextScene: 1 }
        ]
      },
      {
        title: "Астрономическая Степь",
        background: "backgrounds/starfield.jpg",
        messages: [
          "Место где мысли и мечты отображаются в виде звёзд, считается что если коснуться отображения звезды на воде, можно узнать что она значит. Но не каждый может устоять и не утонуть в звёздном озере. Видишь Замок, к которому ведёт степь? Это место, куда мы с тобой направляемся, в нём находится то, что привело тебя сюда. Хочешь попробовать устоять на воде и коснуться отражения звезды? Или пойдём дальше? Думаю, у нас хватит времени посмотреть одну из них.",
          "Ступив аккуратно на поверхность воды, немного пошатнувшись, ты понимаешь, что вода тебя держит. После чего ты делаешь ещё один шаг, чтобы дотянуться до звезды. Коснувшись её, ты понимаешь, что это звезда отображает искреннее желание Вишеда прожить всю жизнь с человеком, которого зовут Итами. Звезда начинает светиться ещё сильнее и перемещается дальше по звёздному небу.",
          "Дух: Удивительно, но кажется, это была твоя звезда. Итами, пойдём дальше, у нас не так много времени сейчас. Думаю, в будущем у тебя будет возможность вернуться и во всём тут разобраться."
        ],
        actions: [
          { text: "Ступить на воду и попытаться коснуться звезды.", nextMessage: 1, unlock: 1 },
          { text: "Следовать дальше по пути к Замку.", nextMessage: 2, unlock: 2 }
        ]
      }
    ];

    let currentScene = 0;
    let currentMessage = 0;
    const seenMessages = new Set();

    function renderScene() {
      const scene = scenes[currentScene];
      document.body.style.backgroundImage = `url('${scene.background}')`;
      document.getElementById("scene-title").textContent = scene.title;

      const textContainer = document.getElementById("scene-text");
      textContainer.innerHTML = "";
      for (let i = 0; i <= currentMessage; i++) {
        if (scene.messages[i]) {
          const p = document.createElement("p");
          p.textContent = scene.messages[i];
          textContainer.appendChild(p);
        }
      }

      const actionsContainer = document.getElementById("actions");
      actionsContainer.innerHTML = "";
      scene.actions.forEach((action, idx) => {
        if (action.nextMessage !== undefined && action.nextMessage > currentMessage) return;
        if (action.unlock !== undefined && !seenMessages.has(action.unlock)) return;

        const btn = document.createElement("button");
        btn.textContent = action.text;
        btn.onclick = () => {
          if (action.nextMessage !== undefined) {
            currentMessage = action.nextMessage;
            seenMessages.add(currentMessage);
            renderScene();
          } else if (action.nextScene !== undefined) {
            currentScene = action.nextScene;
            currentMessage = 0;
            seenMessages.clear();
            renderScene();
          }
        };
        actionsContainer.appendChild(btn);
      });
    }

    window.onload = () => renderScene();
  </script>
</body>
</html>
